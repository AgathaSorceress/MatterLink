plugins {
    id "org.jetbrains.kotlin.jvm" version '1.2.41'
    id 'idea'
}

subprojects {
    apply plugin: "kotlin"
    apply plugin: "idea"

    if (System.env.BUILD_NUMBER) {
        mod_version += "-${System.env.BUILD_NUMBER}"
    } else if (!project.hasProperty('release')) {
        mod_version += "-dev"
    }

    idea {
        module {
            excludeDirs += [file("run")]
        }
    }

    repositories {
        jcenter()
        maven {
            name = "unascribed"
            url = 'http://unascribed.com/maven/releases'
        }
        maven {
            name = "shadowfacts"
            url = "http://maven.shadowfacts.net/"
        }
        ivy {
            //Resolves jankson
            name "endless.blue dependency mirror";
            artifactPattern "https://endless.blue/files/ivy/[module]-[revision].[ext]";
        }
    }

}